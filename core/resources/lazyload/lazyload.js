function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(n){var t={debug:!1,initialized:!1,imageSelector:".js-lazyimage",imageClass:"lazyimage",imageWrapperClass:"lazyimage-wrapper",placeholderClass:"lazyimage-placeholder",loaderHtml:'<div class="loader"></div>',images:[],observer:null,observerOptions:{root:document.getElementsByTagName("body")[0],rootMargin:"200px 0px 200px",threshold:.01},latestId:0,getId:function(){return this.latestId+=1},getImageById:function(t){return this.images.find(function(e){return e.id===t})},collectImages:function(){var t=this;n(this.imageSelector).each(function(){if(void 0===n(this).data("lazy-id")){var e=t.getId();n(this).data("lazy-id",e).addClass("".concat(t.imageClass,"-").concat(e)),t.images.push({id:e,el:this,asBackground:!!n(this).data("as-background"),replacePlaceholder:!!n(this).data("replace-placeholder"),isLoaded:!1,isObserved:!1})}}),this.log("Images",this.images)},observeImages:function(){this.observer||this.initObserver();var e=!0,t=!1,a=void 0;try{for(var i,r=this.images[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var s=i.value;s.isObserved||s.isLoaded||(this.observer.observe(s.el),s.isObserved=!0)}}catch(e){t=!0,a=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}},imageIntersects:function(e){var t=!0,a=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var o=r.value;o.isIntersecting&&(this.observer.unobserve(o.target),this.loadImage(this.getImageById(n(o.target).data("lazy-id"))))}}catch(e){a=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw i}}},loadImage:function(t){var a=this;this.log("Image loading:",{id:t.id,image:t}),n(document).trigger("lazyimage-loading",{image:t});var e=n("<img/>");e.on("load",function(){t.isLoaded=!0;var e=n(t.el);t.asBackground?e.css({backgroundImage:"url("+e.data("src")+")"}):t.replacePlaceholder?e.parent(".".concat(a.imageWrapperClass)).replaceWith(e.removeClass("lazyimage").addClass("loaded lazy-image").attr("src",e.data("src"))):e.attr("src",e.data("src")).addClass("loaded").parent(".".concat(a.imageWrapperClass)).addClass("loaded");a.log("Image loaded:",{id:t.id,image:t}),n(document).trigger("lazyimage-loaded",{type:"success",image:t})}),e.on("error",function(){a.log("Image load error:",{id:t.id,image:t}),n(document).trigger("lazyimage-loaded",{type:"error",image:t})}),e.attr("src",n(t.el).data("src"))},initObserver:function(){this.observer=new IntersectionObserver(this.imageIntersects.bind(this),this.observerOptions)},init:function(e){for(var t in this.log("Init, options:",e||{}),e)this.hasOwnProperty(t)&&"function"!=typeof this[t]&&("object"===_typeof(this[t])?this[t]=n.extend(this[t],e[t]):this[t]=e[t]);this.initialized||(this.collectImages(),this.initObserver(),this.observeImages()),this.initialized=!0},log:function(){var e;this.debug&&(e=console).log.apply(e,arguments)}};n.lazyLoad=function(e){if("string"!=typeof e)return t.init(e),this;switch(e){case"refetchElements":case"collectImages":t.collectImages(),t.observeImages()}}}(jQuery);