!function(e){var i=[],t={defaultAspectRatio:1.777777778,threshold:200,loaderHtml:'<div class="loader"></div>',imageIdentifierPrefix:"lazy-image-"},a=!0,r=!1,d=function(){return e.grep(i,function(i){if(void 0===i)return!1;var a=e("#"+t.imageIdentifierPrefix+i.id);if(a.length<=0)return!1;var r=e(window).scrollTop(),d=e(window).height(),n=r-200-t.threshold,o=r+d+200+t.threshold,s=a.offset().top,l=s+a.outerHeight();return s>=n&&s<=o||s<=n&&l<=o&&l>=n})},n=function(){e(".lazy-image").show();var a=d();e(a).each(function(){var a=e("<img/>",{src:this.sources.default,class:this.class}),r=this;a.on("load",function(){if(delete i[r.id],r.asBackground){var d=e(r.html).css({backgroundImage:"url("+r.sources.default+")"});e("#"+t.imageIdentifierPrefix+r.id).replaceWith(d.attr("id",t.imageIdentifierPrefix+r.id))}else e("#"+t.imageIdentifierPrefix+r.id).replaceWith(a.attr("id",t.imageIdentifierPrefix+r.id));e(document).trigger("lazyimage-loaded",{type:"success",imageId:"#"+t.imageIdentifierPrefix+r.id})}),a.on("error",function(){delete i[r.id],e("#"+t.imageIdentifierPrefix+r.id).css("cursor","default").find(".loader").replaceWith('<span style="position: absolute; left: 0; right: 0; top: 50%; font-size: 40px; line-height: 40px; margin-top: -20px; text-align: center; opacity: .2;">?</span>'),e("#"+t.imageIdentifierPrefix+r.id).show(),e(document).trigger("lazyimage-loaded",{type:"error",imageId:"#"+t.imageIdentifierPrefix+r.id})})})};e.fn.lazyLoad=function(d){if("refresh"==d)return void 0!==arguments[1]&&(t=e.extend(t,arguments[1])),n(),!0;t=e.extend(t,d),this.each(function(a){var r=e(this).attr("data-width"),d=e(this).attr("data-height"),n=t.defaultAspectRatio,o=e(this).attr("data-as-background");r&&d&&(n=d/r),i.push({id:a,class:e(this).attr("class"),width:r,height:d,aspectRatio:n,asBackground:o,html:e(this)[0].outerHTML,sources:{default:e(this).attr("data-src")}});var s=e("<div/>",{class:"lazyload-placeholder "+e(this).attr("class"),id:t.imageIdentifierPrefix+a}).css({position:"relative"}).append(e("<div/>").css({height:0,"padding-bottom":100*n+"%"})).append(e(t.loaderHtml));e(this).replaceWith(s)}),n(),setInterval(function(){1!=a&&1!=r||(n(),a=!1)},250),e(document).on("touchmove",function(){r=!0}),e(window).on("scroll resize",function(){a=!0,r=!1})}}(jQuery);