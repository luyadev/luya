!function(a){var b=[],c={defaultAspectRatio:1.777777778,threshold:200,loaderHtml:'<div class="loader"></div>',imageIdentifierPrefix:"lazy-image-"},d=!0,e=!1,f=function(){return a.grep(b,function(b){if("undefined"==typeof b)return!1;var d=a("#"+c.imageIdentifierPrefix+b.id);if(d.length<=0)return!1;var e=a(window).scrollTop()-200-c.threshold,f=e+a(window).height()+200+c.threshold,g=d.offset().top,h=g+d.outerHeight();return g>=e&&g<=f||g<=e&&h<=f&&h>=e})},g=function(){a(".lazy-image").show();var d=f();a(d).each(function(){var d=a("<img/>",{src:this.sources.default,class:this.class}),e=this;d.on("load",function(){if(delete b[e.id],e.asBackground){var f=a(e.html).css({backgroundImage:"url("+e.sources.default+")"});a("#"+c.imageIdentifierPrefix+e.id).replaceWith(f.attr("id",c.imageIdentifierPrefix+e.id))}else a("#"+c.imageIdentifierPrefix+e.id).replaceWith(d.attr("id",c.imageIdentifierPrefix+e.id));a(document).trigger("lazyimage-loaded",{type:"success",imageId:"#"+c.imageIdentifierPrefix+e.id})}),d.on("error",function(){delete b[e.id],a("#"+c.imageIdentifierPrefix+e.id).css("cursor","default").find(".loader").replaceWith('<span style="position: absolute; left: 0; right: 0; top: 50%; font-size: 40px; line-height: 40px; margin-top: -20px; text-align: center; opacity: .2;">?</span>'),a("#"+c.imageIdentifierPrefix+e.id).show(),a(document).trigger("lazyimage-loaded",{type:"error",imageId:"#"+c.imageIdentifierPrefix+e.id})})})};a.fn.lazyLoad=function(f){return"refresh"==f?("undefined"!=typeof arguments[1]&&(c=a.extend(c,arguments[1])),g(),!0):(c=a.extend(c,f),this.each(function(d){var e=a(this).attr("data-width"),f=a(this).attr("data-height"),g=c.defaultAspectRatio,h=a(this).attr("data-as-background");e&&f&&(g=f/e),b.push({id:d,class:a(this).attr("class"),width:e,height:f,aspectRatio:g,asBackground:h,html:a(this)[0].outerHTML,sources:{default:a(this).attr("data-src")}});var i=a("<div/>",{class:"lazyload-placeholder "+a(this).attr("class"),id:c.imageIdentifierPrefix+d}).css({position:"relative"}).append(a("<div/>").css({height:0,"padding-bottom":100*g+"%"})).append(a(c.loaderHtml));a(this).replaceWith(i)}),g(),setInterval(function(){1!=d&&1!=e||(g(),d=!1)},250),a(document).on("touchmove",function(){e=!0}),void a(window).on("scroll resize",function(){d=!0,e=!1}))}}(jQuery);