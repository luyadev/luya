{"version":3,"sources":["cmsadmin.js","services.js"],"names":["zaa","directive","ServiceMenuData","restrict","scope","navId","controller","$scope","changeModel","data","id","menuData","$on","event","toggler","length","load","template","$compile","model","options","label","i18n","name","$http","$state","$watch","n","get","params","then","response","path","container","goTo","go","templateUrl","parent","$parent","isEditAvailable","item","nav_item_type","modules","o","angular","isArray","$filter","Slug","ServiceLanguagesData","AdminToastService","error","success","menuDataReload","menu","items","navcontainers","containers","parent_nav_id","is_draft","nav_container_id","languagesData","lang_id","parseInt","is_default","navitems","undefined","aliasSuggestion","alias","slugify","title","exec","save","isInline","getItem","nav_id","reason","forEach","value","key","ServiceLayoutsData","use_draft","layout_id","from_draft_id","layoutsData","drafts","layouts","factory","service","status","delegate","config","$stateProvider","resolverProvider","state","url","post","headers","Content-Type","closeCreateModal","createVersionModalState","editVersionModalState","closeEditModal","openEditModal","toggleVersionEdit","versionId","switchVersion","toggleRemoveVersion","versionid","removeCurrentVersion","changeVersionLayout","versionItem","$","param","pageItemId","layoutId","version_alias","refreshForce","createNewVersionSubmit","copyExistingVersion","versionLayoutId","navItemId","versionName","fromPageId","fromVersionPageId","isOpen","itemSelection","selection","NavItemController","select","copy","loadItems","NavController","navData","lang","refresh","droppedNavItem","showVersionList","errorMessageOnDuplicateAlias","i18nParam","onBeforeDrop","$event","$ui","itemid","target","moveItemId","droppedBeforeItemId","r","onAfterDrop","droppedAfterItemId","onChildDrop","droppedOnItemId","onEmptyDrop","droppedOnCatId","filter","input","containerId","parentNavId","result","push","returnValue","ServiceLiveEditMode","display","homeUrl","d","Date","getTime","liveEditState","toggleItem","toggle_open","ignoreLoadingBar","changeUrl","nav_item_id","showDrag","isCurrentElement","hiddenCats","toggleCat","catId","toggleIsHidden","$q","resolve","reject","$stateParams","LuyaLoading","PlaceholderService","ServicePropertiesData","AdminClassService","AdminLangService","propertiesData","placeholderState","sidebar","enableSidebar","toggleSidebar","showActions","isDeleted","propValues","hasValues","bubbleParents","createDeepPageCopy","loadNavProperties","i","admin_prop_id","togglePropMask","showPropForm","storePropValues","trash","confirm","$timeout","$toast","close","isDraft","submitNavForm","layout_file","message","is_offline","offlineStatus","notify","is_hidden","hiddenStatus","is_home","homeState","loaded","openLiveUrl","loadLiveUrl","currentPageVersion","isTranslated","itemCopy","settings","typeDataCopy","typeData","currentVersionInformation","errors","trashItem","$broadcast","reset","nav_item_type_id","updateNavItemData","title_tag","description","keywords","toggleSettings","pageId","aliasName","langId","method","pageVersionid","isInSelection","short_code","refreshNested","prevId","placeholderVar","navItemPageId","__placeholders","revPlaceholders","placeholder","replaceContent","tmp","find","revFind","holder","rsp","NavItemTypePageController","toggleOpen","mouseEnter","getClassSpace","$sce","ServiceBlockCopyStack","PagePlaceholderController","onStart","$apply","setClassSpace","copyBlock","block","toggleHidden","blockId","hiddenState","hasInfo","varFieldName","field_help","getInfo","isEditable","vars","isConfigable","cfgs","safe","html","trustAsHtml","onStop","values","variation","evalVariationVisbility","variatenName","variations","hasOwnProperty","isObject","v","k","object","var","invisible","cfgdata","cfgvalues","edit","toggleBlockSettings","toggleEdit","toggleConfig","renderTemplate","dataVars","cfgVars","extras","twig","content","render","removeBlock","delete","put","json_config_values","json_config_cfg_values","is_dirty","objectdetail","droppedBlock","onDrop","sortIndex","moveBlock","copyBlockId","prev_id","placeholder_var","nav_item_page_id","sort_index","block_id","helper","remove","draggable","ServiceBlocksData","blocksData","blocksDataRestore","blocksDataReload","addToFav","removeFromFav","toggleGroup","group","copyStack","stack","clearStack","clear","searchQuery","searchIsDirty","addCallback","start","stop","$rootScope","shift","forceReload","toggle","setUrl","itemId"],"mappings":"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","file":"main.min.js","sourcesContent":["(function() {\n\t\"use strict\";\n\t\n\t// directive.js\n\t\n\tzaa.directive(\"menuDropdown\", function(ServiceMenuData) {\n\t\treturn {\n\t\t\trestrict : 'E',\n\t\t\tscope : {\n\t\t\t\tnavId : '='\n\t\t\t},\n\t\t\tcontroller : function($scope) {\n\t\t\t\t\n\t\t\t\t$scope.changeModel = function(data) {\n\t\t\t\t\t$scope.navId = data.id;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$scope.menuData = ServiceMenuData.data;\n\t\t\t\t\n\t\t\t\t$scope.$on('service:MenuData', function(event, data) {\n\t\t\t\t\t$scope.menuData = data;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tfunction init() {\n\t\t\t\t\tif ($scope.menuData.length == 0) {\n\t\t\t\t\t\tServiceMenuData.load();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$scope.toggler = true;\n\t\t\t\t\n\t\t\t\tinit();\n\t\t\t},\n\t\t\ttemplate : function() {\n\t\t\t\treturn '<div class=\"menu-dropdown__category\"><span style=\"cursor:pointer; user-select: none;\" ng-click=\"toggler=!toggler\"><i class=\"material-icons\" ng-if=\"toggler\">keyboard_arrow_down</i><i class=\"material-icons\" ng-if=\"!toggler\">keyboard_arrow_up</i></span><br /><div ng-show=\"toggler\" ng-repeat=\"container in menuData.containers\">' +\n                            '<b class=\"menu-dropdown__title\">{{container.name}}</b>' +\n                            '<ul class=\"menu-dropdown__list\">' +\n                                '<li class=\"menu-dropdown__item\" ng-repeat=\"data in menuData.items | menuparentfilter:container.id:0\" ng-include=\"\\'menuDropdownReverse\\'\"></li>' +\n                            '</ul>' +\n                        '</div><div>';\n\t\t\t}\n\t\t}\n\t});\n\t\n\tzaa.directive(\"zaaCmsPage\", function($compile){\n        return {\n            restrict: \"E\",\n            scope: {\n                \"model\": \"=\",\n                \"options\": \"=\",\n                \"label\": \"@label\",\n                \"i18n\": \"@i18n\",\n                \"id\": \"@fieldid\",\n                \"name\": \"@fieldname\"\n            },\n            template: function() {\n                return '<div class=\"input input--image-upload\" ng-class=\"{\\'input--hide-label\\': i18n}\">' +\n                            '<label class=\"input__label\">{{label}}</label>' +\n                            '<div class=\"input__field-wrapper\">' +\n                                '<menu-dropdown class=\"menu-dropdown\" nav-id=\"model\" />' +\n                            '</div>' +\n                        '</div>';\n            }\n        }\n    });\n\n\tzaa.directive(\"showInternalRedirection\", function() {\n\t\treturn {\n\t\t\trestrict : 'E',\n\t\t\tscope : {\n\t\t\t\tnavId : '='\n\t\t\t},\n\t\t\tcontroller : function($scope, $http, $state) {\n\t\t\t\t\n\t\t\t\t$scope.$watch('navId', function(n) {\n\t\t\t\t\tif (n) {\n\t\t\t\t\t\t$http.get('admin/api-cms-navitem/get-nav-item-path', { params : { navId : $scope.navId }}).then(function(response) {\n\t\t\t\t\t\t\t$scope.path = response.data;\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$http.get('admin/api-cms-navitem/get-nav-container-name', { params : { navId : $scope.navId }}).then(function(response) {\n\t\t\t\t\t\t\t$scope.container = response.data;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t$scope.goTo = function(navId) {\n\t\t\t\t\t$state.go('custom.cmsedit', { navId : navId });\n\t\t\t\t}\n\t\t\t},\n\t\t\ttemplate : function() {\n\t\t\t\treturn '<a ng-click=\"goTo(navId)\" style=\"cursor:pointer\">{{path}}</a> in {{container}}';\n\t\t\t}\n\t\t}\n\t});\n\n    zaa.directive(\"updateFormPage\", function() {\n        return {\n            restrict : 'EA',\n            scope : {\n                data : '='\n            },\n            templateUrl : 'updateformpage.html',\n            controller : function($scope) {\n            \t\n            \t$scope.parent = $scope.$parent.$parent;\n            \t\n            \t$scope.isEditAvailable = function() {\n            \t\treturn $scope.parent.item.nav_item_type == 1;\n            \t}\n            }\n        }\n    });\n\n\tzaa.directive(\"updateFormModule\", function() {\n\t\treturn {\n\t\t\trestrict : 'EA',\n\t\t\tscope : {\n\t\t\t\tdata : '='\n\t\t\t},\n\t\t\ttemplateUrl : 'updateformmodule.html',\n\t\t\tcontroller : function($scope, $http) {\n\t\t\t\t$scope.modules = [];\n\t\t\t\t$http.get('admin/api-admin-common/data-modules').then(function(response) {\n\t\t\t\t\t$scope.modules = response.data;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tzaa.directive(\"updateFormRedirect\", function() {\n\t\treturn {\n\t\t\trestrict : 'EA',\n\t\t\tscope : {\n\t\t\t\tdata : '='\n\t\t\t},\n\t\t\ttemplateUrl : 'updateformredirect.html',\n\t\t\tcontroller : function($scope) {\n\t\t\t\t$scope.$watch(function() { return $scope.data }, function(n, o) {\n\t\t\t\t\tif (angular.isArray(n)) {\n\t\t\t\t\t\t$scope.data = {};\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\t\n\tzaa.directive(\"createForm\", function() {\n\t\treturn {\n\t\t\trestrict : 'EA',\n\t\t\tscope : {\n\t\t\t\tdata : '='\n\t\t\t},\n\t\t\ttemplateUrl : 'createform.html',\n\t\t\tcontroller : function($scope, $http, $filter, ServiceMenuData, Slug, ServiceLanguagesData, AdminToastService) {\n\t\t\t\t\n\t\t\t\t$scope.error = [];\n\t\t\t\t$scope.success = false;\n\t\t\t\t\n\t\t\t\t$scope.controller = $scope.$parent;\n\t\t\t\t\n\t\t\t\t$scope.menuData = ServiceMenuData.data;\n\t\t\t\t\n\t\t\t\t$scope.$on('service:MenuData', function(event, data) {\n\t\t\t\t\t$scope.menuData = data;\n\t\t\t\t});\n\n\t\t\t\t$scope.menuDataReload = function() {\n\t\t\t\t\treturn ServiceMenuData.load(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfunction initializer() {\n\t\t\t\t\t$scope.menu = $scope.menuData.items;\n\t\t\t\t\t$scope.navcontainers = $scope.menuData.containers;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tinitializer();\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t$scope.data.nav_item_type = 1;\n\t\t\t\t$scope.data.parent_nav_id = 0;\n\t\t\t\t$scope.data.is_draft = 0;\n\t\t\t\t\n\t\t\t\t$scope.data.nav_container_id = 1;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t$scope.languagesData = ServiceLanguagesData.data;\n\t\t\t\t\n\t\t\t\t$scope.$on('service:LanguagesData', function(event, data) {\n\t\t\t\t\t$scope.languagesData = data;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t$scope.data.lang_id = parseInt($filter('filter')($scope.languagesData, {'is_default': '1'}, true)[0].id);\n\t\t\t\t\n\t\t\t\t$scope.navitems = [];\n\t\t\t\t\n\t\t\t\t$scope.$watch(function() { return $scope.data.nav_container_id }, function(n, o) {\n\t\t\t\t\tif (n !== undefined && n !== o) {\n\t\t\t\t\t\t$scope.data.parent_nav_id = 0;\n\t\t\t\t\t\t$scope.navitems = $scope.menu[n]['__items'];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t$scope.aliasSuggestion = function() {\n\t\t\t\t\t$scope.data.alias = Slug.slugify($scope.data.title);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t$scope.$watch('data.alias', function(n, o) {\n\t\t\t\t\tif (n!=o && n!=null) {\n\t\t\t\t\t\t$scope.data.alias = Slug.slugify(n);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t$scope.exec = function () {\n\t\t\t\t\t$scope.controller.save().then(function(response) {\n\t\t\t\t\t\t$scope.menuDataReload();\n\t\t\t\t\t\t$scope.success = true;\n\t\t\t\t\t\t$scope.error = [];\n\t\t\t\t\t\t$scope.data.title = null;\n\t\t\t\t\t\t$scope.data.alias = null;\n\t\t\t\t\t\tif ($scope.data.isInline) {\n\t\t\t\t\t\t\t$scope.$parent.$parent.getItem($scope.data.lang_id, $scope.data.nav_id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tAdminToastService.success(i18n['view_index_page_success'], 4000);\n\t\t\t\t\t}, function(reason) {\n\t\t\t\t\t\tangular.forEach(reason, function(value, key) {\n\t\t\t\t\t\t\tAdminToastService.error(value[0], 2000);\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$scope.error = reason;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t});\n\t\n\tzaa.directive(\"createFormPage\", function(ServiceLayoutsData, ServiceMenuData) {\n\t\treturn {\n\t\t\trestrict : 'EA',\n\t\t\tscope : {\n\t\t\t\tdata : '='\n\t\t\t},\n\t\t\ttemplateUrl : 'createformpage.html',\n\t\t\tcontroller : function($scope) {\n\t\t\t\t\n\t\t\t\t$scope.data.use_draft = 0;\n\t\t\t\t$scope.data.layout_id = 0;\n\t\t\t\t$scope.data.from_draft_id = 0;\n\t\t\t\t\n\t\t\t\t// layoutsData\n\t\t\t\t\n\t\t\t\t$scope.layoutsData = ServiceLayoutsData.data;\n\t\t\t\t\n            \t$scope.$on('service:BlocksData', function(event, data) {\n            \t\t$scope.layoutsData = data;\n            \t});\n            \t\n            \t// menuData\n            \t\n    \t\t\t$scope.menuData = ServiceMenuData.data;\n\t\t\t\t\n\t\t\t\t$scope.$on('service:MenuData', function(event, data) {\n\t\t\t\t\t$scope.menuData = data;\n\t\t\t\t});\n            \t\n            \tfunction init() {\n            \t\t$scope.drafts = $scope.menuData.drafts;\n            \t\t$scope.layouts = $scope.layoutsData;\n            \t}\n\t\t\t\t\n            \tinit();\n            \t\n\t\t\t\t$scope.save = function() {\n\t\t\t\t\t$scope.$parent.exec();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tzaa.directive(\"createFormModule\", function($http) {\n\t\treturn {\n\t\t\trestrict : 'EA',\n\t\t\tscope : {\n\t\t\t\tdata : '='\n\t\t\t},\n\t\t\ttemplateUrl : 'createformmodule.html',\n\t\t\tcontroller : function($scope) {\n\t\t\t\t\n\t\t\t\t$scope.modules = [];\n\t\t\t\t\n\t\t\t\t$http.get('admin/api-admin-common/data-modules').then(function(response) {\n\t\t\t\t\t$scope.modules = response.data;\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t$scope.save = function() {\n\t\t\t\t\t$scope.$parent.exec();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\t\n\tzaa.directive(\"createFormRedirect\", function() {\n\t\treturn {\n\t\t\trestrict : 'EA',\n\t\t\tscope : {\n\t\t\t\tdata : '='\n\t\t\t},\n\t\t\ttemplateUrl : 'createformredirect.html',\n\t\t\tcontroller : function($scope) {\n\t\t\t\t\n\t\t\t\t$scope.save = function() {\n\t\t\t\t\t$scope.$parent.exec();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\t\n\t// factory.js\n\t\n\tzaa.factory('PlaceholderService', function() {\n\t\tvar service = [];\n\t\t\n\t\tservice.status = 1; /* 1 = showplaceholders; 0 = hide placeholders */\n\t\t\n\t\tservice.delegate = function(status) {\n\t\t\tservice.status = status;\n\t\t}\n\t\t\n\t\treturn service;\n\t});\n\t\n\t// layout.js\n\t\n\tzaa.config(function($stateProvider, resolverProvider) {\n\t\t$stateProvider\n\t\t.state(\"custom.cmsedit\", {\n\t\t\turl : \"/update/:navId\",\n\t\t\ttemplateUrl : 'cmsadmin/page/update'\n\t\t})\n\t\t.state(\"custom.cmsadd\", {\n\t\t\turl : \"/create\",\n\t\t\ttemplateUrl : 'cmsadmin/page/create'\n\t\t})\n\t\t.state(\"custom.cmsdraft\", {\n\t\t\turl: '/drafts',\n\t\t\ttemplateUrl: 'cmsadmin/page/drafts'\n\t\t});\n\t});\n\t\n\tzaa.controller(\"DraftsController\", function($scope, $state, ServiceMenuData) {\n\t\t\n\t\t$scope.menuData = ServiceMenuData.data;\n\t\t\n\t\t$scope.$on('service:MenuData', function(event, data) {\n\t\t\t$scope.menuData = data;\n\t\t});\n\t\t\n\t\t$scope.go = function(navId) {\n\t\t\t$state.go('custom.cmsedit', { navId : navId });\n\t\t};\n\t\t\n\t});\n\t\n\t/* controllers */\n\t\n\tzaa.controller(\"ConfigController\", function($scope, $http, AdminToastService) {\n\t\t$scope.data = {};\n\t\t\n\t\t$http.get('admin/api-cms-admin/config').then(function(response) {\n\t\t\t$scope.data = response.data;\n\t\t});\n\t\t\n\t\t$scope.save = function() {\n\t\t\t$http.post('admin/api-cms-admin/config', $scope.data).then(function(response) {\n\t\t\t\tAdminToastService.success(i18n['js_config_update_success'], 4000);\n\t\t\t});\n\t\t}\n\t});\n\t\n\tzaa.controller(\"PageVersionsController\", function($scope, $http, ServiceLayoutsData, AdminToastService) {\n\t\t/**\n\t\t * @var object $typeData From parent scope controller NavItemController\n\t\t * @var object $item From parent scope controller NavItemController\n\t\t * @var string $versionName From ng-model\n\t\t * @var integer $fromVersionPageId From ng-model the version copy from or 0 = new empty/blank version\n\t\t * @var integer $versionLayoutId From ng-model, only if fromVersionPageId is 0\n \t\t */\n\t\t\n\t\tvar headers = {\"headers\" : { \"Content-Type\" : \"application/x-www-form-urlencoded; charset=UTF-8\" }};\n\t\t\n\t\t// layoutsData\n\t\t\n\t\t$scope.layoutsData = ServiceLayoutsData.data;\n\t\t\n    \t$scope.$on('service:LayoutsData', function(event, data) {\n    \t\t$scope.layoutsData = data;\n    \t});\n\t\t\n    \t$scope.closeCreateModal = function() {\n    \t\t$scope.createVersionModalState = true;\n    \t}\n    \t\n    \t$scope.editVersionModalState = true;\n    \t\n    \t$scope.closeEditModal = function() {\n    \t\t$scope.editVersionModalState = true;\n    \t}\n    \t\n    \t$scope.openEditModal = function() {\n    \t\t$scope.editVersionModalState = false;\n    \t}\n    \t\n\t\t$scope.toggleVersionEdit = function(versionId) {\n\t\t\t$scope.$parent.switchVersion(versionId);\n\t\t\t$scope.openEditModal();\n\t\t};\n\t\t\n\t\t$scope.toggleRemoveVersion = function(versionid) {\n\t\t\t$scope.$parent.switchVersion(versionid);\n\t\t\t$scope.$parent.removeCurrentVersion();\n\t\t\t\n\t\t}\n    \t\n    \t// controller logic\n    \t\n    \t$scope.changeVersionLayout = function(versionItem) {\n    \t\t$http.post('admin/api-cms-navitem/change-page-version-layout', $.param({'pageItemId': versionItem.id, 'layoutId': versionItem.layout_id, 'alias': versionItem.version_alias}), headers).then(function(response) {\n    \t\t\t$scope.refreshForce();\n    \t\t\t$scope.closeEditModal();\n    \t\t\tAdminToastService.success(i18n['js_version_update_success'], 4000);\n\t\t\t});\n    \t};\n    \t\n\t\t$scope.createNewVersionSubmit = function(data) {\n\t\t\tif (data == undefined) {\n\t\t\t\tAdminToastService.error(i18n['js_version_error_empty_fields'], 4000);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (data.copyExistingVersion) {\n\t\t\t\tdata.versionLayoutId = 0;\n\t\t\t}\n\t\t\t$http.post('admin/api-cms-navitem/create-page-version', $.param({'layoutId': data.versionLayoutId, 'navItemId': $scope.item.id, 'name': data.versionName, 'fromPageId': data.fromVersionPageId}), headers).then(function(response) {\n\t\t\t\tif (response.data.error) {\n\t\t\t\t\tAdminToastService.error(i18n['js_version_error_empty_fields'], 4000);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$scope.refreshForce();\n\t\t\t\t$scope.closeCreateModal();\n\t\t\t\t\n\t\t\t\tAdminToastService.success(i18n['js_version_create_success'], 4000);\n\t\t\t});\n\t\t};\n\t});\n\t\n\tzaa.controller(\"CopyPageController\", function($scope, $http, AdminToastService, Slug) {\n\t\t\n\t\tvar headers = {\"headers\" : { \"Content-Type\" : \"application/x-www-form-urlencoded; charset=UTF-8\" }};\n\t\t\n\t\t$scope.$on('deletedNavItem', function() {\n\t\t\t$scope.isOpen = false;\n\t\t\t$scope.itemSelection = false;\n\t\t\t$scope.selection = 0;\n\t\t});\n\t\t\n\t\t$scope.NavItemController = $scope.$parent;\n\t\t\n\t\t$scope.navId = 0;\n\t\t\n\t\t$scope.items = null;\n\t\t\n\t\t$scope.isOpen = false;\n\t\t\n\t\t$scope.itemSelection = false;\n\t\t\n\t\t$scope.selection = 0;\n\t\t\n\t\t$scope.select = function(item) {\n\t\t\t$scope.selection = item.id;\n\t\t\t$scope.itemSelection = angular.copy(item);\n\t\t};\n\t\t\n\t\t$scope.aliasSuggestion = function() {\n\t\t\t$scope.itemSelection.alias = Slug.slugify($scope.itemSelection.title);\n\t\t}\n\t\t\n\t\t$scope.loadItems = function() {\n\t\t\t$scope.navId = $scope.NavItemController.NavController.navData.id;\n\t\t\t\n\t\t\t$http.get('admin/api-cms-nav/find-nav-items', { params: { navId : $scope.navId }}).then(function(response) {\n\t\t\t\t$scope.items = response.data;\n\t\t\t\t$scope.isOpen = true;\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.save = function() {\n\t\t\t$scope.itemSelection['toLangId'] = $scope.NavItemController.lang.id;\n\t\t\t$http.post('admin/api-cms-nav/create-from-page', $.param($scope.itemSelection), headers).then(function(response) {\n\t\t\t\tif (response.data) {\n\t\t\t\t\tAdminToastService.success(i18n['js_added_translation_ok'], 3000);\n\t\t\t\t\t$scope.NavItemController.refresh();\n\t\t\t\t} else {\n\t\t\t\t\tAdminToastService.error(i18n['js_added_translation_error'], 5000);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t});\n\t\n\tzaa.controller(\"DropNavController\", function($scope, $http, ServiceMenuData, AdminToastService) {\n\t\t\n\t\t$scope.droppedNavItem = null;\n\n\t\t$scope.showVersionList = false;\n\t\t\n\t\t$scope.errorMessageOnDuplicateAlias = function(response) {\n\t\t\tAdminToastService.error(i18nParam('js_page_add_exists', {title: response.success.title, id: response.success.nav_id}), 5000);\n\t\t}\n\t\t\n\t    $scope.onBeforeDrop = function($event, $ui) {\n\t    \tvar itemid = $($event.target).data('itemid');\n\t\t\t$http.get('admin/api-cms-navitem/move-before', { params : { moveItemId : $scope.droppedNavItem.id, droppedBeforeItemId : itemid }}).then(function(r) {\n\t\t\t\tServiceMenuData.load(true);\n\t\t\t}, function(r) {\n\t\t\t\t$scope.errorMessageOnDuplicateAlias(r.data);\n\t\t\t\tServiceMenuData.load(true);\n\t\t\t});\n\t    }\n\t    \n\t    $scope.onAfterDrop = function($event, $ui) {\n\t    \tvar itemid = $($event.target).data('itemid');\n\t\t\t$http.get('admin/api-cms-navitem/move-after', { params : { moveItemId : $scope.droppedNavItem.id, droppedAfterItemId : itemid }}).then(function(r) {\n\t\t\t\tServiceMenuData.load(true);\n\t\t\t}, function(r) {\n\t\t\t\t$scope.errorMessageOnDuplicateAlias(r.data);\n\t\t\t\tServiceMenuData.load(true);\n\t\t\t});\n\t    }\n\t    \n\t    $scope.onChildDrop = function($event, $ui) {\n\t    \tvar itemid = $($event.target).data('itemid');\n\t\t\t$http.get('admin/api-cms-navitem/move-to-child', { params : { moveItemId : $scope.droppedNavItem.id, droppedOnItemId : itemid }}).then(function(r) {\n\t\t\t\tServiceMenuData.load(true);\n\t\t\t}, function(r) {\n\t\t\t\t$scope.errorMessageOnDuplicateAlias(r.data);\n\t\t\t\tServiceMenuData.load(true);\n\t\t\t});\n\t    }\n\t    \n\t    $scope.onEmptyDrop = function($event, $ui) {\n\t    \tvar itemid = $($event.target).data('itemid');\n\t    \t$http.get('admin/api-cms-navitem/move-to-container', { params : { moveItemId : $scope.droppedNavItem.id, droppedOnCatId : itemid }}).then(function(r) {\n\t    \t\tServiceMenuData.load(true);\n\t\t\t}, function(r) {\n\t\t\t\t$scope.errorMessageOnDuplicateAlias(r.data);\n\t\t\t\tServiceMenuData.load(true);\n\t\t\t});\n\t    }\n\t})\n\t\n\tzaa.filter(\"menuparentfilter\", function() {\n\t\treturn function(input, containerId, parentNavId) {\n\t\t\tvar result = [];\n\t\t\tangular.forEach(input, function(value, key) {\n\t\t\t\tif (value.parent_nav_id == parentNavId && value.nav_container_id == containerId) {\n\t\t\t\t\tresult.push(value);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t};\n\t});\n\t\n\tzaa.filter('menuchildfilter', function() {\n\t\treturn function(input, containerId, parentNavId) {\n\t\t\tvar returnValue = false;\n\t\t\tangular.forEach(input, function(value, key) {\n\t\t\t\tif (!returnValue) {\n\t\t\t\t\tif (value.id == parentNavId && value.nav_container_id == containerId) {\n\t\t\t\t\t\treturnValue = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\treturn returnValue;\n\t\t}\n\t});\n\t\n\tzaa.controller(\"CmsLiveEdit\", function($scope, ServiceLiveEditMode) {\n\t\t\n\t\t$scope.display = 0;\n\t\t\n\t\t$scope.url = homeUrl;\n\t\t\n\t\t$scope.$watch(function() { return ServiceLiveEditMode.state }, function(n, o) {\n\t\t\t$scope.display = n;\n\t\t});\n\t\t\n\t\t$scope.$on('service:LiveEditModeUrlChange', function(event, url) {\n\t\t\tvar d = new Date();\n\t\t\tvar n = d.getTime();\n\t\t\t$scope.url = url + '&' + n;\n\t\t});\n\t\t\n\t});\n\t\n\tzaa.controller(\"CmsMenuTreeController\", function($scope, $state, $http, $filter, ServiceMenuData, ServiceLiveEditMode) {\n\t\t\n\t\t// live edit service\n\t\t\n\t\t$scope.liveEditState = 0;\n\t\t\n\t\t$scope.$watch('liveEditStateToggler', function(n) {\n\t\t\tServiceLiveEditMode.state = n;\n\t\t});\n\t\t\n\t\t// menu Data\n\t\t\n\t\t$scope.menuData = ServiceMenuData.data;\n\t\t\n\t\t$scope.$on('service:MenuData', function(event, data) {\n\t\t\t$scope.menuData = data;\n\t\t});\n\n\t\t$scope.menuDataReload = function() {\n\t\t\treturn ServiceMenuData.load(true);\n\t\t};\n\t\t\n\t\t// controller logic\n\t\t\n\t\t$scope.toggleItem = function(data) {\n\t\t\tif (data.toggle_open == undefined) {\n\t\t\t\tdata['toggle_open'] = 1;\n\t\t\t} else {\n\t\t\t\tdata['toggle_open'] = !data.toggle_open;\n\t\t\t}\n\t\t\t\n\t\t\t$http.post('admin/api-cms-nav/tree-history', {data: data}, {ignoreLoadingBar: true});\n\t\t\t\n\t\t};\n\t\t\n\t\t$scope.go = function(data) {\n\t\t\tServiceLiveEditMode.changeUrl(data.nav_item_id, 0);\n\t\t\t$state.go('custom.cmsedit', { navId : data.id });\n\t    };\n\t\t\n\t    $scope.showDrag = 0;\n\t    \n\t    $scope.isCurrentElement = function(data) {\n\t    \tif (data !== null && $state.params.navId == data.id) {\n\t    \t\treturn true;\n\t    \t}\n\t    \t\n\t    \treturn false;\n\t    };\n\t    \n\t    $scope.hiddenCats = [];\n\t    \n\t    $scope.$watch('menuData', function (n, o) {\n\t    \t$scope.hiddenCats = n.hiddenCats;\n\t    });\n\t\t\n\t\t$scope.toggleCat = function(catId) {\n\t\t\tif (catId in $scope.hiddenCats) {\n\t\t\t\t$scope.hiddenCats[catId] = !$scope.hiddenCats[catId];\n\t\t\t} else {\n\t\t\t\t$scope.hiddenCats[catId] = 1;\n\t\t\t}\n\t\t\t\n\t\t\t$http.post('admin/api-cms-nav/save-cat-toggle', {catId: catId, state: $scope.hiddenCats[catId]}, {ignoreLoadingBar: true});\n\t\t};\n\t\t\n\t\t$scope.toggleIsHidden = function(catId) {\n\t\t\t\n\t\t\tif ($scope.hiddenCats == undefined) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (catId in $scope.hiddenCats) {\n\t\t\t\tif ($scope.hiddenCats[catId] == 1) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t};\n\t    \n\t});\n\t\n\t// create.js\n\t\n\tzaa.controller(\"CmsadminCreateController\", function($scope, $q, $http) {\n\t\t\n\t\t$scope.data = {};\n\t\t$scope.data.isInline = false;\n\t\t\n\t\t$scope.save = function() {\n\t\t\t\n\t\t\tvar headers = {\"headers\" : { \"Content-Type\" : \"application/x-www-form-urlencoded; charset=UTF-8\" }};\n\t\t\t\n\t\t\treturn $q(function(resolve, reject) {\n\t\t\t\t\n\t\t\t\tif ($scope.data.nav_item_type == 1) {\n\t\t\t\t\t$http.post('admin/api-cms-nav/create-page', $.param($scope.data), headers).then(function(response) {\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}, function(response) {\n\t\t\t\t\t\treject(response.data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ($scope.data.nav_item_type == 2) {\n\t\t\t\t\t$http.post('admin/api-cms-nav/create-module', $.param($scope.data), headers).then(function(response) {\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}, function(response) {\n\t\t\t\t\t\treject(response.data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ($scope.data.nav_item_type == 3) {\n\t\t\t\t\t$http.post('admin/api-cms-nav/create-redirect', $.param($scope.data), headers).then(function(response) {\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}, function(response) {\n\t\t\t\t\t\treject(response.data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\t\n\tzaa.controller(\"CmsadminCreateInlineController\", function($scope, $q, $http) {\n\t\t\n\t\t$scope.data = {\n\t\t\tnav_id : $scope.$parent.NavController.id\n\t\t};\n\t\t\n\t\t$scope.data.isInline = true;\n\t\t\n\t\t$scope.save = function() {\n\t\t\n\t\t\t$scope.data.lang_id = $scope.lang.id;\n\t\t\t\n\t\t\tvar headers = {\"headers\" : { \"Content-Type\" : \"application/x-www-form-urlencoded; charset=UTF-8\" }};\n\t\t\t\n\t\t\treturn $q(function(resolve, reject) {\n\t\t\t\t\n\t\t\t\tif ($scope.data.nav_item_type == 1) {\n\t\t\t\t\t$http.post('admin/api-cms-nav/create-page-item', $.param($scope.data), headers).then(function(response) {\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}, function(response) {\n\t\t\t\t\t\treject(response.data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ($scope.data.nav_item_type == 2) {\n\t\t\t\t\t$http.post('admin/api-cms-nav/create-module-item', $.param($scope.data), headers).then(function(response) {\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}, function(response) {\n\t\t\t\t\t\treject(response.data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ($scope.data.nav_item_type == 3) {\n\t\t\t\t\t$http.post('admin/api-cms-nav/create-redirect-item', $.param($scope.data), headers).then(function(response) {\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}, function(response) {\n\t\t\t\t\t\treject(response.data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t\n\t});\n\t\n\t// update.js\n\t\n\tzaa.controller(\"NavController\", function($scope, $filter, $stateParams, $http, LuyaLoading, PlaceholderService, ServicePropertiesData, ServiceMenuData, ServiceLanguagesData, AdminToastService, AdminClassService, AdminLangService) {\n\t\t\n\t\t$scope.AdminLangService = AdminLangService;\n\t\t\n\t\t/* service AdminPropertyService inheritance */\n\t\t\n\t\t$scope.propertiesData = ServicePropertiesData.data;\n\t\t\n\t\t$scope.$on('service:PropertiesData', function(event, data) {\n\t\t\t$scope.propertiesData = data;\n\t\t});\n\t\t\n\t\t/* service ServiceMenuData inheritance */\n\t\t\n\t\t$scope.menuData = ServiceMenuData.data;\n\t\t\n\t\t$scope.$on('service:MenuData', function(event, data) {\n\t\t\t$scope.menuData = data;\n\t\t});\n\n\t\t$scope.menuDataReload = function() {\n\t\t\treturn ServiceMenuData.load(true);\n\t\t}\n\t\t\n\t\t/* service ServiceLangaugesData inheritance */\n\t\t\n\t\t$scope.languagesData = ServiceLanguagesData.data;\n\t\t\n\t\t$scope.$on('service:LanguagesData', function(event, data) {\n\t\t\t$scope.languagesData = data;\n\t\t});\n\t\t\n\t\t/* placeholders toggler service */\n\t\t\n\t\t$scope.PlaceholderService = PlaceholderService;\n\t\t\n\t\t$scope.placeholderState = $scope.PlaceholderService.status;\n\t\t\n\t\t$scope.$watch('placeholderState', function(n, o) {\n\t\t\tif (n !== o && n !== undefined) {\n\t\t\t\t$scope.PlaceholderService.delegate(n);\n\t\t\t}\n\t\t});\n\n\t\t/* sidebar logic */\n\t\t\n\t\t$scope.sidebar = false;\n\t\t\n\t    $scope.enableSidebar = function() {\n\t    \t$scope.sidebar = true;\n\t    }\n\t    \n\t    $scope.toggleSidebar = function() {\n\t        $scope.sidebar = !$scope.sidebar;\n\t    };\n\t    \n\t\t/* app logic */\n\t    \n\t    $scope.showActions = 1;\n\t\t\n\t\t$scope.id = parseInt($stateParams.navId);\n\t\t\n\t\t$scope.isDeleted = false;\n\t\t\n\t\t$scope.AdminClassService = AdminClassService;\n\t\t\n\t\t$scope.propValues = {};\n\t\t\n\t\t$scope.hasValues = false;\n\t\t\n\t\t$scope.bubbleParents = function(parentNavId, containerId) {\n\t    \tvar item = $filter('menuchildfilter')($scope.menuData.items, containerId, parentNavId);\n\t    \tif (item) {\n\t    \t\titem.toggle_open = 1;\n\t    \t\t$scope.bubbleParents(item.parent_nav_id, item.nav_container_id);\n\t    \t}\n\t    }\n\t\t\n\t\t$scope.createDeepPageCopy = function() {\n\t\t\t$http.post('admin/api-cms-nav/deep-page-copy', {navId: $scope.id}).then(function(response) {\n\t\t\t\t$scope.menuDataReload();\n\t\t\t\tAdminToastService.success(i18n['js_page_create_copy_success'], 4000);\n\t\t\t\t$scope.showActions = 1;\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.loadNavProperties = function() {\n\t\t\t$http.get('admin/api-cms-nav/get-properties', { params: {navId: $scope.id}}).then(function(response) {\n\t\t\t\tfor(var i in response.data) {\n\t\t\t\t\tvar d = response.data[i];\n\t\t\t\t\t$scope.propValues[d.admin_prop_id] = d.value;\n\t\t\t\t\t$scope.hasValues = true;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.togglePropMask = function() {\n\t\t\t$scope.showPropForm = !$scope.showPropForm;\n\t\t}\n\t\t\n\t\t$scope.showPropForm = false;\n\t\t\n\t\t$scope.storePropValues = function() {\n\t\t\tvar headers = {\"headers\" : { \"Content-Type\" : \"application/x-www-form-urlencoded; charset=UTF-8\" }};\n\t\t\t$http.post('admin/api-cms-nav/save-properties?navId='+$scope.id, $.param($scope.propValues), headers).then(function(response) {\n\t\t\t\tAdminToastService.success(i18n['js_page_property_refresh'], 4000);\n\t\t\t\t$scope.loadNavProperties();\n\t\t\t\t$scope.showPropForm = false;\n\t\t\t});\n\t\t}\n\t\t\n\t\t$scope.trash = function() {\n\t\t\tAdminToastService.confirm(i18n['js_page_confirm_delete'], function($timeout, $toast) {\n\t\t\t\t\n\t\t\t\t$http.get('admin/api-cms-nav/delete', { params : { navId : $scope.id }}).then(function(response) {\n\t    \t\t\t$scope.isDeleted = true;\n\t    \t\t\t$scope.menuDataReload().then(function() {\n\t    \t\t\t\t$toast.close();\n\t    \t\t\t});\n\t    \t\t}, function(response) {\n\t\t\t\t\tAdminToastService.error(i18n['js_page_delete_error_cause_redirects'], 5000);\n\t\t\t\t});\n\t\t\t});\n\t    };\n\t\t\n\t    $scope.isDraft = false;\n\t\t\n\t    $scope.submitNavForm = function() {\n\t    \t$http.post('admin/api-cms-nav/update?id=' + $scope.navData.id, {layout_file: $scope.navData.layout_file}).then(function(response) {\n\t    \t\tAdminToastService.success(i18nParam('js_page_update_layout_save_success'), 3000);\n\t    \t}, function(response) {\n\t    \t\tangular.forEach(response.data, function(value) {\n\t    \t\t\tAdminToastService.error(value.message, 4000);\n\t    \t\t});\n\t    \t});\n\t    }\n\t    \n\t    function initializer() {\n\t\t\t$scope.navData = $filter('filter')($scope.menuData.items, {id: $scope.id}, true)[0];\n\t\t\t\n\t\t\tif ($scope.navData == undefined) {\n\t\t\t\t$scope.isDraft = true;\n\t\t\t} else {\n\t\t\t\n\t\t\t\t$scope.loadNavProperties();\n\t\t\t\t\n\t\t\t\t/* properties --> */\n\t\t\t\t\n\t\t\t    $scope.$watch(function() { return $scope.navData.is_offline }, function(n, o) {\n\t\t\t    \tif (n !== o && n !== undefined) {\n\t\t\t    \t\t$http.get('admin/api-cms-nav/toggle-offline', { params : { navId : $scope.navData.id , offlineStatus : n }}).then(function(response) {\n\t\t\t\t\t\t\tif ($scope.navData.is_offline == 1) {\n\t\t\t\t\t\t\t\tAdminToastService.notify(i18nParam('js_state_offline', {title: $scope.navData.title}), 2000);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tAdminToastService.notify(i18nParam('js_state_online', {title: $scope.navData.title}), 2000);\n\t\t\t\t\t\t\t}\n\t\t\t    \t\t});\n\t\t\t    \t}\n\t\t\t    });\n\t\t\t    \n\t\t\t    $scope.$watch(function() { return $scope.navData.is_hidden }, function(n, o) {\n\t\t\t\t\tif (n !== o && n !== undefined) {\n\t\t\t\t\t\t$http.get('admin/api-cms-nav/toggle-hidden', { params : { navId : $scope.navData.id , hiddenStatus : n }}).then(function(response) {\n\t\t\t\t\t\t\tif ($scope.navData.is_hidden == 1) {\n\t\t\t\t\t\t\t\tAdminToastService.notify(i18nParam('js_state_hidden', {title: $scope.navData.title}), 2000);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tAdminToastService.notify(i18nParam('js_state_visible', {title: $scope.navData.title}), 2000);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t    \n\t\t\t    $scope.$watch(function() { return $scope.navData.is_home }, function(n, o) {\n\t\t\t    \tif (n !== o && n !== undefined) {\n\t\t\t\t\t\t$http.get('admin/api-cms-nav/toggle-home', { params : { navId : $scope.navData.id , homeState : n }}).then(function(response) {\n\t\t\t\t\t\t\t$scope.menuDataReload().then(function() {\n\t\t\t\t\t\t\t\tif ($scope.navData.is_home == 1) {\n\t\t\t\t\t\t\t\t\tAdminToastService.notify(i18nParam('js_state_is_home', {title: $scope.navData.title}), 2000);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tAdminToastService.notify(i18nParam('js_state_is_not_home', {title: $scope.navData.title}), 2000);\n\t\t\t\t\t\t\t\t}\n\t\t\t    \t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t    \n\t\tinitializer();\n\t});\n\t\n\t/**\n\t * @param $scope.lang from ng-repeat\n\t */\n\tzaa.controller(\"NavItemController\", function($scope, $http, $timeout, Slug, ServiceMenuData, AdminLangService, AdminToastService, ServiceLiveEditMode) {\n\t\t\n\t\t$scope.loaded = false;\n\t\t\n\t\t$scope.NavController = $scope.$parent;\n\t\t\n\t\t$scope.liveEditState = false;\n\t\t\n\t\t$scope.$watch(function() { return ServiceLiveEditMode.state }, function(n, o) {\n\t\t\t$scope.liveEditState = n;\n\t\t});\n\t\t\n\t\t$scope.openLiveUrl = function(id, versionId) {\n\t\t\tServiceLiveEditMode.changeUrl(id, versionId);\n\t\t};\n\t\t\n\t\t$scope.loadLiveUrl = function() {\n\t\t\tServiceLiveEditMode.changeUrl($scope.item.id, $scope.currentPageVersion);\n\t\t}\n\t\t\n\t\t// serviceMenuData inheritance\n\t\t\n\t\t$scope.menuDataReload = function() {\n\t\t\treturn ServiceMenuData.load(true);\n\t\t}\n\t\t\n\t\t$scope.$on('service:LoadLanguage', function(event, data) {\n\t\t\tif (!$scope.loaded) {\n\t\t\t\t$scope.refresh();\n\t\t\t}\n\t\t});\n\t\t\n\t\t// properties:\n\t\t\n\t\t$scope.isTranslated = false;\n\t\t\n\t\t$scope.item = [];\n\t\t\n\t\t$scope.itemCopy = [];\n\t\n\t\t$scope.settings = false;\n\t\t\n\t\t$scope.typeDataCopy = [];\n\t\t\n\t\t$scope.typeData = [];\n\t\t\n\t\t$scope.container = [];\n\t\t\n\t\t$scope.currentVersionInformation = null;\n\t\t\n\t\t$scope.errors = [];\n\t\t\n\t\t$scope.homeUrl = homeUrl;\n\t\t\n\t\t$scope.currentPageVersion = 0;\n\t\t\n\t\t$scope.trashItem = function() {\n\t\t\tif ($scope.lang.is_default == 0) {\n\t\t\t\tAdminToastService.confirm(i18n['js_page_confirm_delete'], function($timeout, $toast) {\n\t\t\t\t\t$http.get('admin/api-cms-navitem/delete', { params : { navItemId : $scope.item.id }}).then(function(response) {\n\t\t\t\t\t\t$scope.menuDataReload().then(function() {\n\t\t\t\t\t\t\t$scope.isTranslated = false;\n\t\t\t\t\t\t\t$scope.item = [];\n\t\t\t\t\t\t\t$scope.itemCopy = [];\n\t\t\t\t\t\t\t$scope.settings = false;\n\t\t\t\t\t\t\t$scope.typeDataCopy = [];\n\t\t\t\t\t\t\t$scope.typeData = [];\n\t\t\t\t\t\t\t$scope.container = [];\n\t\t\t\t\t\t\t$scope.currentVersionInformation = null;\n\t\t\t\t\t\t\t$scope.errors = [];\n\t\t\t\t\t\t\t$scope.currentPageVersion = 0;\n\t\t\t\t\t\t\t$scope.$broadcast('deletedNavItem');\n\t\t\t\t\t\t\t$toast.close();\n\t\t    \t\t\t});\n\t\t    \t\t}, function(response) {\n\t\t\t\t\t\tAdminToastService.error(i18n['js_page_delete_error_cause_redirects'], 5000);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t    };\n\t    \n\t\t$scope.reset = function() {\n\t\t\t$scope.itemCopy = angular.copy($scope.item);\n\t\t\tif ($scope.item.nav_item_type == 1) {\n\t\t\t\t$scope.typeDataCopy = angular.copy({'nav_item_type_id' : $scope.item.nav_item_type_id });\n\t\t\t} else {\n\t\t\t\t$scope.typeDataCopy = angular.copy($scope.typeData);\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t$scope.updateNavItemData = function(itemCopy, typeDataCopy) {\n\t\t\t$scope.errors = [];\n\t\t\tvar headers = {\"headers\" : { \"Content-Type\" : \"application/x-www-form-urlencoded; charset=UTF-8\" }};\n\t\t\tvar navItemId = itemCopy.id;\n\n\t\t\ttypeDataCopy.title = itemCopy.title;\n\t\t\ttypeDataCopy.alias = itemCopy.alias;\n\t\t\ttypeDataCopy.title_tag = itemCopy.title_tag;\n\t\t\ttypeDataCopy.description = itemCopy.description;\n\t\t\ttypeDataCopy.keywords = itemCopy.keywords;\n\t\t\t$http.post(\n\t\t\t\t'admin/api-cms-navitem/update-page-item?navItemId=' + navItemId + '&navItemType=' + itemCopy.nav_item_type,\n\t\t\t\t$.param(typeDataCopy),\n\t\t\t\theaders\n\t\t\t).then(function successCallback(response) {\n\t\t\t\tif (itemCopy.nav_item_type !== 1) {\n\t\t\t\t\t$scope.currentPageVersion = 0;\n\t\t\t\t}\n\t\t\t\t$scope.loaded = false;\n\t\t\t\tAdminToastService.success(i18nParam('js_page_item_update_ok', {'title': itemCopy.title}), 2000);\n\t\t\t\t$scope.menuDataReload();\n\t\t\t\t$scope.refresh();\n\t\t\t\t$scope.toggleSettings();\n\t\t\t}, function errorCallback(response) {\n\t\t\t\t$scope.errors = response.data;\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.toggleSettings = function() {\n\t\t\t$scope.reset();\n\t\t\t$scope.settings = !$scope.settings;\n\t\t};\n\t\t\n\t\t$scope.$watch('itemCopy.alias', function(n, o) {\n\t\t\tif (n!=o && n!=null) {\n\t\t\t\t$scope.itemCopy.alias = Slug.slugify(n);\n\t\t\t}\n\t\t});\n\t\t\n\t\t$scope.removeCurrentVersion = function() {\n\t\t\t// {alias: $scope.currentVersionInformation.version_alias}\n\t\t\tAdminToastService.confirm(i18nParam('js_version_delete_confirm', {alias: $scope.currentVersionInformation.version_alias}), function($toast, $http) {\n\t\t\t\t$http.post('admin/api-cms-navitem/remove-page-version', {pageId : $scope.currentVersionInformation.id}).then(function(response) {\n\t\t\t\t\tvar aliasName = $scope.currentVersionInformation.version_alias;\n\t\t\t\t\t$scope.refreshForce();\n\t\t\t\t\t$toast.close();\n\t\t\t\t\tAdminToastService.success(i18nParam('js_version_delete_confirm_success', {alias: aliasName}), 5000);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t\n\t\t$scope.getItem = function(langId, navId) {\n\t\t\t$http({\n\t\t\t    url: 'admin/api-cms-navitem/nav-lang-item', \n\t\t\t    method: \"GET\",\n\t\t\t    params: { langId : langId, navId : navId }\n\t\t\t}).then(function(response) {\n\t\t\t\tif (response.data) {\n\t\t\t\t\tif (!response.data.error) {\n\t\t\t\t\t\t$scope.item = response.data['item'];\n\t\t\t\t\t\t$scope.typeData = response.data['typeData'];\n\t\t\t\t\t\t$scope.isTranslated = true;\n\t\t\t\t\t\t$scope.reset();\n\t\t\t\t\t\t\n\t\t\t\t\t\t$scope.NavController.bubbleParents($scope.NavController.navData.parent_nav_id, $scope.NavController.navData.nav_container_id);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ($scope.item.nav_item_type == 1) {\n\t\t\t\t\t\t\tif ($scope.currentPageVersion == 0) {\n\t\t\t\t\t\t\t\t$scope.currentPageVersion = response.data.item.nav_item_type_id;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (response.data.item.nav_item_type_id in response.data.typeData) {\n\t\t\t\t\t\t\t\t$scope.currentVersionInformation = response.data.typeData[$scope.currentPageVersion];\n\t\t\t\t\t\t\t\t$scope.container = response.data.typeData[$scope.currentPageVersion]['contentAsArray'];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$scope.loaded = true\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.switchVersion = function(pageVersionid) {\n\t\t\t$scope.container = $scope.typeData[pageVersionid]['contentAsArray'];\n\t\t\t$scope.currentVersionInformation = $scope.typeData[pageVersionid];\n\t\t\t$scope.currentPageVersion = pageVersionid;\n\t\t\t$scope.loadLiveUrl();\n\t\t};\n\t\t\n\t\t$scope.refreshForce = function() {\n\t\t\t$scope.getItem($scope.lang.id, $scope.NavController.id);\n\t\t}\n\t\t\n\t\t$scope.refresh = function() {\n\t\t\tif (AdminLangService.isInSelection($scope.lang.short_code)) {\n\t\t\t\t$scope.getItem($scope.lang.id, $scope.NavController.id);\n\t\t\t}\n\t\t\t\n\t\t};\n\t\t\n\t\t// <!-- NavItemTypePageController CODE\n\t\t\n\t\t$scope.refreshNested = function(prevId, placeholderVar) {\n\t\t\t$http({\n\t\t\t\turl : 'admin/api-cms-navitem/reload-placeholder',\n\t\t\t\tmethod : 'GET',\n\t\t\t\tparams : { navItemPageId : $scope.currentPageVersion, prevId : prevId, placeholderVar : placeholderVar}\n\t\t\t}).then(function(response) {\n\t\t\t\tServiceLiveEditMode.changeUrl($scope.item.id, $scope.currentPageVersion);\n\t\t\t\tfor (var i in $scope.container.__placeholders) {\n\t\t\t\t\tvar out = $scope.revPlaceholders($scope.container.__placeholders[i], prevId, placeholderVar, response.data);\n\t\t\t\t\tif (out !== false ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t});\n\t\t}\n\t\t$scope.revPlaceholders = function(placeholder, prevId, placeholderVar, replaceContent) {\n\t\t\tvar tmp = placeholder['prev_id'];\n\t\t\tif (parseInt(prevId) == parseInt(tmp) && placeholderVar == placeholder['var']) {\n\t\t\t\tplaceholder['__nav_item_page_block_items'] = replaceContent;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\tvar find = $scope.revFind(placeholder, prevId, placeholderVar, replaceContent)\n\t\t\tif (find !== false) {\n\t\t\t\treturn find;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t$scope.revFind = function(placeholder, prevId, placeholderVar, replaceContent) {\n\t\t\tfor (var i in placeholder['__nav_item_page_block_items']) {\n\t\t\t\tfor (var holder in placeholder['__nav_item_page_block_items'][i]['__placeholders']) {\n\t\t\t\t\tvar rsp = $scope.revPlaceholders(placeholder['__nav_item_page_block_items'][i]['__placeholders'][holder], prevId, placeholderVar, replaceContent);\n\t\t\t\t\tif (rsp !== false) {\n\t\t\t\t\t\treturn rsp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t// NavItemTypePageController -->\n\t\t\n\t\tfunction init() {\n\t\t\t$scope.refresh();\n\t\t}\n\t\t\n\t\tinit();\n\t});\n\t\n\t\n\t/**\n\t * @param $scope.placeholder\n\t *            from ng-repeat\n\t */\n\tzaa.controller(\"PagePlaceholderController\", function($scope, AdminClassService, PlaceholderService) {\n\t\t\n\t\t$scope.NavItemTypePageController = $scope.$parent;\n\t\t\n\t\t$scope.PlaceholderService = PlaceholderService;\n\t\t\n\t\t$scope.$watch(function() { return $scope.PlaceholderService.status }, function(n,o) {\n\t\t\tif (n) {\n\t\t\t\t$scope.isOpen = true;\n\t\t\t} else {\n\t\t\t\t$scope.isOpen = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\t$scope.isOpen = false;\n\t\t\n\t\t$scope.toggleOpen = function() {\n\t\t\t$scope.isOpen = !$scope.isOpen;\n\t\t}\n\t\t\n\t\t$scope.mouseEnter = function() {\n\t\t\tvar status = AdminClassService.getClassSpace('onDragStart');\n\t\t\tif (status !== undefined && !$scope.isOpen) {\n\t\t\t\t$scope.isOpen = true;\n\t\t\t}\n\t\t};\n\t});\n\t\n\t\n\t/**\n\t * @param $scope.block\n\t *            from ng-repeat\n\t */\n\tzaa.controller(\"PageBlockEditController\", function($scope, $sce, $http, AdminClassService, AdminToastService, ServiceBlockCopyStack, ServiceLiveEditMode) {\n\t\n\t\t$scope.PagePlaceholderController = $scope.$parent;\n\t\t\n\t\t$scope.onStart = function() {\n\t\t\t$scope.$apply(function() {\n\t\t\t\tAdminClassService.setClassSpace('onDragStart', 'page--drag-active');\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.copyBlock = function() {\n\t\t\tServiceBlockCopyStack.push($scope.block.id, $scope.block.name);\n\t\t};\n\t\t\n\t\t$scope.toggleHidden = function() {\n\t\t\tif ($scope.block.is_hidden == 0) {\n\t\t\t\t$scope.block.is_hidden = 1;\n\t\t\t} else {\n\t\t\t\t$scope.block.is_hidden = 0;\n\t\t\t}\n\t\t\t\n\t\t\t$http({\n\t\t\t    url: 'admin/api-cms-navitem/toggle-block-hidden', \n\t\t\t    method: \"GET\",\n\t\t\t    params: { blockId : $scope.block.id, hiddenState: $scope.block.is_hidden }\n\t\t\t}).then(function(response) {\n\t\t\t\t/* load live url on hidden trigger */\n\t\t\t\t$scope.PagePlaceholderController.NavItemTypePageController.$parent.$parent.loadLiveUrl();\n\t\t\t\t// successfull toggle hidden state of block\n\t\t\t\tAdminToastService.notify(i18nParam('js_page_block_visbility_change', {name: $scope.block.name}), 2000);\n\t\t\t});\n\t\t}\n\n\t\t$scope.hasInfo = function(varFieldName) {\n\t\t\tif (varFieldName in $scope.block.field_help) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t$scope.getInfo = function(varFieldName) {\n\t\t\treturn $scope.block.field_help[varFieldName];\n\t\t}\n\t\t\n        $scope.isEditable = function() {\n            return typeof $scope.block.vars != \"undefined\" && $scope.block.vars.length > 0;\n        };\n\n        $scope.isConfigable = function() {\n            return typeof $scope.block.cfgs != \"undefined\" && $scope.block.cfgs.length > 0;\n        };\n\t\t\n\t\t$scope.safe = function(html) {\n\t\t\treturn $sce.trustAsHtml(html);\n\t\t};\n\t\t\n\t\t$scope.onStop = function() {\n\t\t\t$scope.$apply(function() {\n\t\t\t\tAdminClassService.setClassSpace('onDragStart', undefined);\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.$watch(function() { return $scope.block.values }, function(n, o) {\n\t\t\t$scope.data = n;\n\t\t});\n\t\t\n\t\t$scope.$watch(function() { return $scope.block.variation }, function(n, o) {\n\t\t\t$scope.evalVariationVisbility(n);\n\t\t});\n\t\t\n\t\t$scope.evalVariationVisbility = function(variatenName) {\n\t\t\tif ($scope.block.variations.hasOwnProperty(variatenName)) {\n\t\t\t\tvar variation = $scope.block.variations[$scope.block.variation];\n\t\t\t\tangular.forEach(variation, function(value, key) {\n\t\t\t\t\tif (angular.isObject(value)) {\n\t\t\t\t\t\tangular.forEach(value, function(v, k) {\n\t\t\t\t\t\t\tangular.forEach($scope.block[key], function(object) {\n\t\t\t\t\t\t\t\tif (k == object.var) {\n\t\t\t\t\t\t\t\t\tobject.invisible = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tangular.forEach($scope.block.cfgs, function(object) {\n\t\t\t\t\tobject.invisible = false;\n\t\t\t\t});\n\t\t\t\tangular.forEach($scope.block.vars, function(object) {\n\t\t\t\t\tobject.invisible = false;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\t$scope.cfgdata = $scope.block.cfgvalues || {};\n\t\t\n\t\t$scope.edit = false;\n\t\t$scope.config = false;\n\n\t\t$scope.toggleBlockSettings = function() {\n\t\t\t$scope.edit = false;\n\t\t\t$scope.config = false;\n\t\t};\n\n\t\t$scope.toggleEdit = function() {\n\t\t\tif (!$scope.isEditable()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$scope.edit = !$scope.edit;\n\t\t\t$scope.config = false;\n\t\t};\n\n\t\t$scope.toggleConfig = function() {\n\t\t\tif (!$scope.isConfigable()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$scope.config = !$scope.config;\n\t\t\t$scope.edit = false;\n\t\t};\n\t\t\n\t\t$scope.renderTemplate = function(template, dataVars, cfgVars, block, extras) {\n\t\t\tif (template == undefined) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tvar template = twig({\n\t\t\t    data: template\n\t\t\t});\n\t\t\t\n\t\t\tvar content = template.render({\n\t\t\t\tvars : dataVars,\n\t\t\t\tcfgs : cfgVars,\n\t\t\t\tblock : block,\n\t\t\t\textras : extras\n\t\t\t});\n\t\t\t\n\t\t\treturn $sce.trustAsHtml(content);\n\t\t};\n\t\t\n\t\t$scope.removeBlock = function(block) {\n\t\t\tAdminToastService.confirm(i18nParam('js_page_block_delete_confirm', {name: block.name}), function($timeout, $toast) {\n\t\t\t\t$http.delete('admin/api-cms-navitempageblockitem/delete?id=' + block.id).then(function(response) {\n\t\t\t\t\t$scope.PagePlaceholderController.NavItemTypePageController.refresh();\n\t\t\t\t\t$scope.PagePlaceholderController.NavItemTypePageController.loadLiveUrl();\n\t\t\t\t\t$toast.close();\n\t\t\t\t\tAdminToastService.success(i18nParam('js_page_block_remove_ok', {name: block.name}), 2000);\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.save = function () {\n\t\t\t$http.put('admin/api-cms-navitempageblockitem/update?id=' + $scope.block.id, {\n\t\t\t\tjson_config_values: $scope.data,\n\t\t\t\tjson_config_cfg_values: $scope.cfgdata,\n\t\t\t\tvariation: $scope.block.variation\n\t\t\t}).then(function(response) {\n\t\t\t\tAdminToastService.success(i18nParam('js_page_block_update_ok', {name: $scope.block.name}), 2000);\n\t\t\t\t$scope.edit = false;\n\t\t\t\t$scope.config = false;\n\t\t\t\t$scope.block.is_dirty = 1;\n\t\t\t\t$scope.block = angular.copy(response.data.objectdetail);\n\t\t\t\t$scope.PagePlaceholderController.NavItemTypePageController.loadLiveUrl();\n\t\t\t\t$scope.evalVariationVisbility($scope.block.variation);\n\t\t\t});\n\t\t}\n\t\t\n\t});\n\t\n\t/**\n\t * @TODO HANDLING SORT INDEX OF EACH BLOCK\n\t */\n\tzaa.controller(\"DropBlockController\", function($scope, $http, AdminClassService) {\n\t\t\n\t\t$scope.PagePlaceholderController = $scope.$parent;\n\t\t\n\t\t$scope.droppedBlock = {};\n\t\t\n\t\t$scope.onDrop = function($event, $ui) {\n\t\t\t\n\t\t\tvar headers = {\"headers\" : { \"Content-Type\" : \"application/x-www-form-urlencoded; charset=UTF-8\" }};\n\t\t\t\n\t\t\tvar sortIndex = $($event.target).data('sortindex');\n\t\t\tvar moveBlock = $scope.droppedBlock['vars'] || false;\n\t\t\tvar event = $scope.droppedBlock['event'] || false;\n\t\t\t\n\t\t\tif (event === 'isServiceBlockCopyInstance') {\n\t\t\t\t$http.post('admin/api-cms-navitemblock/copy-block-from-stack', $.param({\n\t\t\t\t\tcopyBlockId: $scope.droppedBlock.blockId,\n\t\t\t\t\tsortIndex: sortIndex,\n\t\t\t\t\tprevId:  $scope.placeholder.prev_id,\n\t\t\t\t\tplaceholder_var : $scope.placeholder.var, nav_item_page_id : $scope.placeholder.nav_item_page_id\n\t\t\t\t}), headers).then(function(response) {\n\t\t\t\t\t$scope.PagePlaceholderController.NavItemTypePageController.refreshNested($scope.placeholder.prev_id, $scope.placeholder.var);\n\t\t\t\t\t$scope.droppedBlock = {};\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (moveBlock === false) {\n\t\t\t\t\t$http.post('admin/api-cms-navitempageblockitem/create', { prev_id : $scope.placeholder.prev_id, sort_index : sortIndex, block_id : $scope.droppedBlock.id , placeholder_var : $scope.placeholder.var, nav_item_page_id : $scope.placeholder.nav_item_page_id }).then(function(response) {\n\t\t\t\t\t\t$scope.PagePlaceholderController.NavItemTypePageController.refreshNested($scope.placeholder.prev_id, $scope.placeholder.var);\n\t\t\t\t\t\t$scope.droppedBlock = {};\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t$http.put('admin/api-cms-navitempageblockitem/update?id=' + $scope.droppedBlock.id, {\n\t\t\t\t\t\tprev_id : $scope.placeholder.prev_id,\n\t\t\t\t\t\tplaceholder_var : $scope.placeholder['var'],\n\t\t\t\t\t\tsort_index : sortIndex\n\t\t\t\t\t}).then(function(response) {\n\t\t\t\t\t\t$scope.PagePlaceholderController.NavItemTypePageController.refreshNested($scope.placeholder.prev_id, $scope.placeholder.var);\n\t\t\t\t\t\t$scope.droppedBlock = {};\n\t\t\t\t\t\t$($ui.helper).remove(); //destroy clone\n\t\t\t            $($ui.draggable).remove(); //remove from list\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tAdminClassService.setClassSpace('onDragStart', undefined);\n\t\t}\n\t});\n\t\n\tzaa.controller(\"DroppableBlocksController\", function($scope, $http, AdminClassService, ServiceBlocksData, ServiceBlockCopyStack, $sce) {\n\t\n\t\t// service ServiceBlocksData inheritance\n\t\t\n\t\t$scope.blocksData = ServiceBlocksData.data;\n\t\t\n\t\t$scope.blocksDataRestore = angular.copy($scope.blocksData);\n\t\t\n\t\t$scope.$on('service:BlocksData', function(event, data) {\n\t\t\t$scope.blocksData = data;\n\t\t});\n\n\t\t$scope.blocksDataReload = function() {\n\t\t\treturn ServiceBlocksData.load(true);\n\t\t}\n\t\t\n\t\t$scope.addToFav = function(item) {\n\t\t\t$http.post('admin/api-cms-block/to-fav', {block: item }).then(function(response) {\n\t\t\t\t$scope.blocksDataReload();\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.removeFromFav = function(item) {\n\t\t\t$http.post('admin/api-cms-block/remove-fav', {block: item }).then(function(response) {\n\t\t\t\t$scope.blocksDataReload();\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.toggleGroup = function(group) {\n\t\t\tif (group.toggle_open == undefined) {\n\t\t\t\tgroup.toggle_open = 1;\n\t\t\t} else {\n\t\t\t\tgroup.toggle_open = !group.toggle_open;\n\t\t\t}\n\t\t\t\n\t\t\t$http.post('admin/api-cms-block/toggle-group', {group: group}, {ignoreLoadingBar: true});\n\t\t}\n\t\t\n\t\t// controller logic\n\t\t\n\t\t$scope.copyStack = ServiceBlockCopyStack.stack;\n\t\t\n\t\t$scope.$on('service:CopyStack', function(event, stack) {\n\t\t\t$scope.copyStack = stack;\n\t\t});\n\t\t\n\t\t$scope.clearStack = function() {\n\t\t\tServiceBlockCopyStack.clear();\n\t\t};\n\t\t\n\t\t$scope.searchQuery = '';\n\t\t\n\t\t$scope.searchIsDirty = false;\n\t\t\n\t\t$scope.$watch('searchQuery', function(n, o) {\n\t\t\tif (n !== '') {\n\t\t\t\t$scope.searchIsDirty = true;\n\t\t\t\tangular.forEach($scope.blocksData, function(value, key) {\n\t\t\t\t\tvalue.group.toggle_open = 1\n\t\t\t\t});\n\t\t\t} else if($scope.searchIsDirty) {\n\t\t\t\t$scope.blocksData = angular.copy($scope.blocksDataRestore);\n\t\t\t}\n\t\t})\n\t\t\n\t\t$scope.onStart = function() {\n\t\t\t$scope.$apply(function() {\n\t\t\t\tAdminClassService.setClassSpace('onDragStart', 'page--drag-active');\n\t\t\t});\n\t\t}\n\t\t\n\t\t$scope.safe = function(html) {\n\t\t\treturn $sce.trustAsHtml(html);\n\t\t}\n\t\t\n\t\t$scope.onStop = function() {\n\t\t\t$scope.$apply(function() {\n\t\t\t\tAdminClassService.setClassSpace('onDragStart', undefined);\n\t\t\t});\n\t\t}\n\t});\n\t\n})();","/**\n * all global admin services\n * \n * controller resolve: https://github.com/johnpapa/angular-styleguide#style-y080\n * \n * Service Inheritance:\n * \n * 1. Service must be prefix with Service\n * 2. Service must contain a forceReload state\n * 3. Service must broadcast an event 'service:FoldersData'\n * 4. Controller integration must look like\n * \n * ```\n * $scope.foldersData = ServiceFoldersData.data;\n *\t\t\t\t\n * $scope.$on('service:FoldersData', function(event, data) {\n *      $scope.foldersData = data;\n * });\n *\t\t\t\t\n * $scope.foldersDataReload = function() {\n *     return ServiceFoldersData.load(true);\n * }\n * ```\n * \n */\n(function() {\n\t\"use strict\";\n\t\nzaa.config(function(resolverProvider) {\n\tresolverProvider.addCallback(function(ServiceMenuData, ServiceBlocksData, ServiceLayoutsData, LuyaLoading) {\n\t\tLuyaLoading.start();\n\t\tServiceBlocksData.load();\n\t\tServiceLayoutsData.load();\n\t\tServiceMenuData.load().then(function(r) {\n\t\t\tLuyaLoading.stop();\n\t\t});\n\t});\n});\n\n/*\nblock data copy stack\n*/\n\nzaa.factory(\"ServiceBlockCopyStack\", function($rootScope) {\n\tvar service = [];\n\t\n\tservice.stack = [];\n\t\n\tservice.clear = function() {\n\t\tservice.stack = [];\n\t\t$rootScope.$broadcast('service:CopyStack', service.stack);\n\t};\n\t\n\tservice.push = function(blockId, name) {\n\t\tif (service.stack.length > 4) {\n\t\t\tservice.stack.shift();\n\t\t}\n\t\tservice.stack.push({blockId: blockId, name: name, event: 'isServiceBlockCopyInstance'});\n\t\t$rootScope.$broadcast('service:CopyStack', service.stack);\n\t};\n\t\n\treturn service;\n});\n\n/*\n\n$scope.menuData = ServiceMenuData.data;\n\t\t\t\t\n$scope.$on('service:MenuData', function(event, data) {\n\t$scope.menuData = data;\n});\n\n$scope.menuDataReload = function() {\n\treturn ServiceMenuData.load(true);\n}\n\t\t\t\t\n*/\nzaa.factory(\"ServiceMenuData\", function($http, $q, $rootScope) {\n\tvar service = [];\n\t\n\tservice.data = [];\n\t\n\tservice.load = function(forceReload) {\n\t\treturn $q(function(resolve, reject) {\n\t\t\tif (service.data.length > 0 && forceReload !== true) {\n\t\t\t\tresolve(service.data);\n\t\t\t} else {\n\t\t\t\t$http.get(\"admin/api-cms-menu/data-menu\").then(function(response) {\n\t\t\t\t\tservice.data = response.data;\n\t\t\t\t\t$rootScope.$broadcast('service:MenuData', service.data);\n\t\t\t\t\tresolve(service.data);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\t\n\treturn service;\n});\n\n\n/*\n\n$scope.blocksData = ServiceBlocksData.data;\n\t\t\t\t\n$scope.$on('service:BlocksData', function(event, data) {\n\t$scope.blocksData = data;\n});\n\n$scope.blocksDataReload = function() {\n\treturn ServiceBlocksData.load(true);\n}\n\t\t\t\t\n*/\nzaa.factory(\"ServiceBlocksData\", function($http, $q, $rootScope) {\n\tvar service = [];\n\t\n\tservice.data = [];\n\t\n\tservice.load = function(forceReload) {\n\t\treturn $q(function(resolve, reject) {\n\t\t\tif (service.data.length > 0 && forceReload !== true) {\n\t\t\t\tresolve(service.data);\n\t\t\t} else {\n\t\t\t\t$http.get(\"admin/api-cms-admin/data-blocks\").then(function(response) {\n\t\t\t\t\tservice.data = response.data;\n\t\t\t\t\t$rootScope.$broadcast('service:BlocksData', service.data);\n\t\t\t\t\tresolve(service.data);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\t\n\treturn service;\n});\n\n\n/*\n\n$scope.layoutsData = ServiceLayoutsData.data;\n\t\t\t\t\n$scope.$on('service:BlocksData', function(event, data) {\n\t$scope.layoutsData = data;\n});\n\n$scope.layoutsDataReload = function() {\n\treturn ServiceLayoutsData.load(true);\n}\n\t\t\t\t\n*/\nzaa.factory(\"ServiceLayoutsData\", function($http, $q, $rootScope) {\n\tvar service = [];\n\t\n\tservice.data = [];\n\t\n\tservice.load = function(forceReload) {\n\t\treturn $q(function(resolve, reject) {\n\t\t\tif (service.data.length > 0 && forceReload !== true) {\n\t\t\t\tresolve(service.data);\n\t\t\t} else {\n\t\t\t\t$http.get(\"admin/api-cms-admin/data-layouts\").then(function(response) {\n\t\t\t\t\tservice.data = response.data;\n\t\t\t\t\t$rootScope.$broadcast('service:LayoutsData', service.data);\n\t\t\t\t\tresolve(service.data);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\t\n\treturn service;\n});\n\n\n/*\n * CMS LIVE EDIT SERIVCE\n * \n * $scope.liveEditMode = ServiceLiveEditMode.state\n */\nzaa.factory(\"ServiceLiveEditMode\", function($rootScope) {\n\t\n\tvar service = [];\n\t\n\tservice.state = 0;\n\t\n\tservice.url = null;\n\t\n\tservice.toggle = function() {\n\t\tservice.state = !service.state;\n\t}\n\t\n\tservice.setUrl = function(itemId, versionId) {\n\t\tservice.url = homeUrl  + 'preview/' + itemId + '?version=' + versionId;\n\t};\n\t\n\tservice.changeUrl = function(itemId, versionId) {\n\t\tif (versionId == undefined) {\n\t\t\tversionId = 0;\n\t\t}\n\t\tservice.setUrl(itemId, versionId);\n\t\t$rootScope.$broadcast('service:LiveEditModeUrlChange', service.url);\n\t}\n\t\n\treturn service;\n});\n\n// end of use strict\n})();"]}